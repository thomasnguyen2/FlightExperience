---
title: "SDS 322E Project"
author: "Team 2"
date: "2022-09-30"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



This is our project for team 2, Flight Experience. The data contains information over 129,880 people who flew on different airplanes (with the same airline company though) and describes their plane ride experience. They rate their overall experience (from a scale of 1 to 5 where '0' stands for "Not Applicable" , '1' is "Least Satisfied" and '5' is "Most Satisfied") over a lot of different variables. There are also two columns that include data over their departure delay and arrival delay time. It's a classification problem, and we will look at the variables that make the best ride for a passenger and determine if they would have categorized their ride as 'satisfied' or ' 'unsatisfied' depending on their self-report. 

Our goal: With this information, we will be able to help the company increase their retention rate with customers by being able to focus on what aspects of the flights that people enjoy the most. 

References/Link to the data: The data is given by an airline organization. The actual name of the company is not given due to privacy. This is a link to the original dataset on Kaggle: https://www.kaggle.com/datasets/sjleshrac/airlines-customer-satisfaction

These are all the column names: 

 [1] "satisfaction"                      "Gender"                            "Customer.Type"                     "Age"                              
 [5] "Type.of.Travel"                    "Class"                             "Flight.Distance"                   "Seat.comfort"                     
 [9] "Departure.Arrival.time.convenient" "Food.and.drink"                    "Gate.location"                     "Inflight.wifi.service"            
[13] "Inflight.entertainment"            "Online.support"                    "Ease.of.Online.booking"            "On.board.service"                 
[17] "Leg.room.service"                  "Baggage.handling"                  "Checkin.service"                   "Cleanliness"                      
[21] "Online.boarding"                   "Departure.Delay.in.Minutes"        "Arrival.Delay.in.Minutes"  




```{r}
library(ggplot2)
library(tidyverse)
```



```{r}
flight_df <- read.csv("Flight_Experience.csv") %>% data.frame()
head(flight_df)

```



Cleaning the data
```{r}

flight_df %>% summarize_all(function(x) sum(is.na(x)))

```
There are NA's in the dataset so lets clean it. Only column that has blanks is Arrival.Delay.in.Minutes



```{r}
flight_df[is.na(flight_df)] <- 0
```
Now there are no more NA's



Let's create some categoircal variables for age
```{r}

min(flight_df$Age)
max(flight_df$Age)


```


```{r}

m <- function(x){
  
  mean(x, rm.na = T)
  
}
average <- flight_df %>% group_by(Class) %>% select_if(is.numeric) %>% summarize_all(m) %>% select(-Flight.Distance)
average


tidy_average <- average %>% pivot_longer(cols=c('Age':'Arrival.Delay.in.Minutes'), names_to = 'flight_variable', values_to = 'average')
tidy_average

tidy_average %>%  ggplot(aes(x = Class, y = average, fill = Class)) + geom_bar(stat = "identity") + facet_wrap(~flight_variable) 

#Add errors

```



```{r}
#First Viz
ggplot(data = flight_df, aes(x = Gender, fill = Class)) + geom_bar(position="dodge") +  geom_text(stat="count", aes(label=..count..), position=position_dodge(width=0.9), vjust=-0.2) + theme_bw() 

```



```{r}
flight_df %>% group_by(Class) %>% summarize(Average_distance = mean(Flight.Distance))%>% ggplot(aes(x = Class, y = Average_distance)) + geom_bar(stat = "identity") +  geom_text(stat="identity", aes(label=Average_distance), vjust=-0.2) + theme_bw()
```

